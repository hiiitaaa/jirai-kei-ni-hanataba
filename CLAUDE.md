# åœ°é›·å¨˜ã«èŠ±æŸã‚’ - å®Œå…¨ç‰ˆã‚²ãƒ¼ãƒ è¦ä»¶å®šç¾©æ›¸ï¼ˆæ”¹è¨‚ç‰ˆï¼‰

## é–‹ç™ºãƒ«ãƒ¼ãƒ«
- **æ·±ãæ€è€ƒã™ã‚‹**: å®Ÿè£…å‰ã«è¦ä»¶ã‚’ååˆ†ã«ç†è§£ã—ã€å½±éŸ¿ç¯„å›²ã‚’è€ƒæ…®ã™ã‚‹
- **æŒ‡ç¤ºã•ã‚ŒãŸä¿®æ­£ã®ã¿å®Ÿè¡Œ**: æ˜ç¢ºã«è¦æ±‚ã•ã‚Œã¦ã„ãªã„å¤‰æ›´ã¯è¡Œã‚ãªã„
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®å¯¾è©±ã‚’é‡è¦–**: ä¸æ˜ç‚¹ã¯ç¢ºèªã—ã€å‹æ‰‹ãªåˆ¤æ–­ã‚’é¿ã‘ã‚‹
- **ç†è§£ã®é½Ÿé½¬ã‚’é˜²ã**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã®èªè­˜ãŒåˆã£ã¦ã„ã‚‹ã‹å¸¸ã«ç¢ºèªã—ãªãŒã‚‰é€²ã‚ã‚‹
- **ã‚³ãƒ¼ãƒ‰ã®å†åˆ©ç”¨**: æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã¯å¯èƒ½ãªé™ã‚Šä½¿ã„å›ã—ã€é‡è¤‡ã‚’é¿ã‘ã‚‹
- **å‰µä½œæ´»å‹•ã§ã®æŸ”è»Ÿãªå¯¾å¿œ**: ã‚»ãƒªãƒ•ã‚„ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ä½œæˆæ™‚ã¯ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¿…ãšå‚ç…§
  - `E:\tool\claude_ultra\claude_ultra.md` - å‰µä½œã«ãŠã‘ã‚‹æŸ”è»Ÿãªå¯¾å¿œæŒ‡é‡
  - `E:\tool\claude_ultra\claude_ultra_first.txt` - ã‚·ã‚¹ãƒ†ãƒ ç†è§£ã®ãŸã‚ã®ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆ
  - ã“ã‚Œã‚‰ã¯æˆäººå‘ã‘å¿ƒç†ãƒ›ãƒ©ãƒ¼è¦ç´ ã‚’å«ã‚€æœ¬ä½œå“ã®è¡¨ç¾ã‚’é©åˆ‡ã«æ‰±ã†ãŸã‚ã®é‡è¦ãªå‚ç…§è³‡æ–™

## /init ã«ã‚ˆã‚‹æ›´æ–°å±¥æ­´
- **åˆå›/init**: åŸºæœ¬çš„ãªã‚²ãƒ¼ãƒ è¦ä»¶å®šç¾©ã‚’ä½œæˆ
- **é›£æ˜“åº¦èª¿æ•´**: åœ°é›·æ•°ã‚’ä¸‹æ–¹ä¿®æ­£ï¼ˆEASY:10â†’8ã€NORMAL:25â†’18ã€HARD:50â†’35ï¼‰
- **ã‚»ãƒ¼ãƒ–æ©Ÿèƒ½è¿½åŠ **: å„ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ã§è‡ªå‹•ã‚»ãƒ¼ãƒ–ã€ã‚¿ã‚¤ãƒˆãƒ«ã‹ã‚‰ç¶šãã‚’é¸æŠå¯èƒ½
- **ã‚®ãƒ£ãƒ©ãƒªãƒ¼æ©Ÿèƒ½è¿½åŠ **: ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ã§ã”è¤’ç¾å‹•ç”»è§£æ”¾ã€å…¨ã‚¯ãƒªã‚¢ã§å…¨å‹•ç”»ã‚’ã„ã¤ã§ã‚‚é–²è¦§å¯èƒ½
- **é–‹ç™ºãƒ«ãƒ¼ãƒ«è¿½åŠ **: æ·±ã„æ€è€ƒã¨æŒ‡ç¤ºå³å®ˆã®åŸå‰‡ã‚’æ˜æ–‡åŒ–
- **é–‹ç™ºãƒ«ãƒ¼ãƒ«æ›´æ–°**: ç†è§£ã®é½Ÿé½¬é˜²æ­¢ã¨ã‚³ãƒ¼ãƒ‰å†åˆ©ç”¨ã®åŸå‰‡ã‚’è¿½åŠ 

## 1. ã‚²ãƒ¼ãƒ æ¦‚è¦

### åŸºæœ¬æƒ…å ±
- **ã‚¿ã‚¤ãƒˆãƒ«**: åœ°é›·å¨˜ã«èŠ±æŸã‚’
- **ã‚¸ãƒ£ãƒ³ãƒ«**: ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ï¼‹ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒãƒ™ãƒ«
- **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Windowsï¼ˆexeé…å¸ƒï¼‰ã€Webç‰ˆï¼ˆé–‹ç™ºæ™‚ï¼‰
- **æœ€çµ‚é…å¸ƒå½¢å¼**: å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.exeï¼‰ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ³ã‚°
- **ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ**: 18æ­³ä»¥ä¸Šã€ã‚µã‚¹ãƒšãƒ³ã‚¹ãƒ»æ‹æ„›ã‚²ãƒ¼ãƒ æ„›å¥½è€…
- **ãƒ—ãƒ¬ã‚¤æ™‚é–“**: 1å‘¨ç´„30-60åˆ†

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
å¯æ„›ã„å¥³ã®å­ã€Œã‚¢ãƒŸã€ã¨ã®ãƒ‡ãƒ¼ãƒˆã€‚ã—ã‹ã—ã€å½¼å¥³ã¯ã€Œåœ°é›·ç³»ã€ã€‚
è¨€è‘‰ä¸€ã¤ã§å½¼å¥³ã®åœ°é›·ã‚’è¸ã‚“ã§ã—ã¾ã†ã¨ã€ã¨ã¦ã¤ã‚‚ãªãç½µå€’ã•ã‚Œã€æœ€æ‚ªã®å ´åˆã¯å½¼å¥³ã®éƒ¨å±‹ã«ç›£ç¦ã•ã‚Œã¦ã—ã¾ã†ã€‚
ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ã§å½¼å¥³ã®å¿ƒã®åœ°é›·ã‚’é¿ã‘ãªãŒã‚‰ã€ç„¡äº‹ã«æœã‚’è¿ãˆã‚‹ã“ã¨ãŒç›®æ¨™ã€‚

### ã‚¹ãƒˆãƒ¼ãƒªãƒ¼æ¦‚è¦
```
å¤•æ–¹ã®å¾…ã¡åˆã‚ã›ã‹ã‚‰å§‹ã¾ã‚‹ä¸€å¤œã®ãƒ‡ãƒ¼ãƒˆã€‚
æ¥½ã—ã„ã¯ãšã®æ™‚é–“ãŒã€ä¸€ã¤ã®å¤±è¨€ã§åœ°ç„ã«å¤‰ã‚ã‚‹ã€‚
å½¼å¥³ã®å¿ƒã®åœ°é›·ã‚’é¿ã‘ã¦ã€ç„¡äº‹ã«æœã‚’è¿ãˆã‚‰ã‚Œã‚‹ã‹ï¼Ÿ
```

## 2. æŠ€è¡“ä»•æ§˜

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
project/
â”œâ”€â”€ index.html
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ main.js
â”‚   â”œâ”€â”€ game.js
â”‚   â”œâ”€â”€ board.js
â”‚   â”œâ”€â”€ cell.js
â”‚   â”œâ”€â”€ novel.js          // ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒãƒ™ãƒ«ãƒ‘ãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ character.js
â”‚   â””â”€â”€ ui.js
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ scenarios.csv     // ã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ dialogues.csv     // ã‚»ãƒªãƒ•ãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ sprites.csv       // ç”»åƒãƒ‘ã‚¹ç®¡ç†
â”‚   â”œâ”€â”€ animations.csv    // å‹•ç”»ãƒ‘ã‚¹ç®¡ç†
â”‚   â”œâ”€â”€ sounds.csv        // éŸ³å£°ãƒ‘ã‚¹ç®¡ç†
â”‚   â””â”€â”€ levels.csv        // é›£æ˜“åº¦è¨­å®š
â””â”€â”€ assets/
    â”œâ”€â”€ sprites/          // ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«
    â”œâ”€â”€ videos/           // å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«
    â””â”€â”€ sounds/           // éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«
```

### CSVãƒ‡ãƒ¼ã‚¿æ§‹é€ 

#### scenarios.csvï¼ˆã‚·ãƒŠãƒªã‚ªé€²è¡Œï¼‰
```csv
id,scene_name,background,bgm,next_scene,condition
1,meeting,street_evening.png,bgm_date.mp3,easy_game,none
2,easy_clear,restaurant.png,bgm_restaurant.mp3,dinner_scene,clear_easy
3,dinner_scene,restaurant_table.png,bgm_dinner.mp3,normal_game,none
4,normal_clear,street_night.png,bgm_night.mp3,home_scene,clear_normal
5,home_scene,ami_room.png,bgm_room.mp3,hard_game,none
6,hard_clear,ami_bedroom.png,bgm_morning.mp3,true_end,clear_hard
7,bad_end,dark_room.png,bgm_horror.mp3,game_over,fail_game
```

#### dialogues.csvï¼ˆã‚»ãƒªãƒ•ãƒ‡ãƒ¼ã‚¿ï¼‰
```csv
id,character,scene,emotion,text,voice_file,trigger
1,ami,meeting,smile,"é…ã„ï¼ã‚‚ã†ã€å¾…ã¡ããŸã³ã‚Œã¡ã‚ƒã£ãŸâ™ª",ami_meeting_01.mp3,start
2,ami,meeting,angry,"...ãªã‚“ã§5åˆ†ã‚‚é…ã‚Œã‚‹ã®ï¼Ÿç§ã®ã“ã¨ã€ã©ã†ã§ã‚‚ã„ã„ã®ï¼Ÿ",ami_angry_01.mp3,late
3,ami,easy_game,irritated,"ã­ãˆã€ç§ã®è©±ã¡ã‚ƒã‚“ã¨èã„ã¦ã‚‹ï¼Ÿ",ami_irritated_01.mp3,game_start
4,ami,easy_clear,happy,"ã‚ˆã‹ã£ãŸâ™ªã¡ã‚ƒã‚“ã¨ç§ã®ã“ã¨è¦‹ã¦ãã‚Œã¦ã‚‹ã‚“ã ã­ï¼",ami_happy_01.mp3,clear
5,ami,dinner_scene,smile,"ã“ã®ãŠåº—ã€å‰ã‹ã‚‰æ¥ãŸã‹ã£ãŸã®ï¼",ami_dinner_01.mp3,start
6,ami,normal_game,dark,"...ã•ã£ãã‹ã‚‰ä»–ã®å¥³ã®å­ã°ã£ã‹ã‚Šè¦‹ã¦ãªã„ï¼Ÿ",ami_dark_01.mp3,game_start
7,ami,normal_clear,relief,"ã”ã‚ã‚“ã­ã€ç§ã®å‹˜é•ã„ã ã£ãŸ...",ami_relief_01.mp3,clear
8,ami,home_scene,sweet,"ç§ã®éƒ¨å±‹ã€åˆã‚ã¦ã§ã—ã‚‡ï¼Ÿç·Šå¼µã™ã‚‹ï¼Ÿ",ami_home_01.mp3,start
9,ami,hard_game,yandere,"ã­ãˆ...ç§ã ã‘ã‚’è¦‹ã¦ã‚ˆã€‚ä»–ã®èª°ã‚‚è¦‹ãªã„ã§ã€‚",ami_yandere_01.mp3,game_start
10,ami,hard_clear,love,"å¤§å¥½ã...ãšã£ã¨ä¸€ç·’ã«ã„ã‚ˆã†ã­â™ª",ami_love_01.mp3,clear
11,ami,bad_end,crazy,"ã‚‚ã†é€ƒãŒã•ãªã„ã€‚ãšã£ã¨ã“ã“ã«ã„ã¦ã€‚ç§ã ã‘ã®ã‚‚ã®ã«ãªã£ã¦ã€‚",ami_crazy_01.mp3,bad_end
```

#### sprites.csvï¼ˆç”»åƒç®¡ç†ï¼‰
```csv
id,sprite_name,file_path,width,height,category,encryption
spr_ami_smile,ã‚¢ãƒŸç¬‘é¡”,ami_smile.png,512,768,character,true
spr_ami_angry,ã‚¢ãƒŸæ€’ã‚Š,ami_angry.png,512,768,character,true
spr_ami_dark,ã‚¢ãƒŸé—‡,ami_dark.png,512,768,character,true
spr_ami_yandere,ã‚¢ãƒŸãƒ¤ãƒ³ãƒ‡ãƒ¬,ami_yandere.png,512,768,character,true
spr_ami_crazy,ã‚¢ãƒŸç‹‚æ°—,ami_crazy.png,512,768,character,true
bg_street_evening,å¤•æ–¹ã®è¡—,street_evening.png,1280,720,background,true
bg_restaurant,ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³,restaurant.png,1280,720,background,true
bg_ami_room,ã‚¢ãƒŸã®éƒ¨å±‹,ami_room.png,1280,720,background,true
bg_dark_room,ç›£ç¦éƒ¨å±‹,dark_room.png,1280,720,background,true
```

## 3. ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ 

### é›£æ˜“åº¦è¨­å®š

#### levels.csv
```csv
difficulty,grid_size,mine_count,time_limit,description,clear_requirement
easy,9x9,8,180,å¾…ã¡åˆã‚ã›ç·¨ï¼šä¸æ©Ÿå«Œãªã‚¢ãƒŸã®åœ°é›·ã‚’é¿ã‘ã‚,å…¨ãƒã‚¹-åœ°é›·ãƒã‚¹é–‹æ”¾
normal,12x12,18,240,é£Ÿäº‹ç·¨ï¼šæ€¥å¤‰ã™ã‚‹ã‚¢ãƒŸã®æ„Ÿæƒ…ã«å¯¾å‡¦ã›ã‚ˆ,å…¨ãƒã‚¹-åœ°é›·ãƒã‚¹é–‹æ”¾
hard,16x16,35,300,è‡ªå®…ç·¨ï¼šãƒ¤ãƒ³ãƒ‡ãƒ¬åŒ–ã—ãŸã‚¢ãƒŸã‹ã‚‰ç”Ÿãå»¶ã³ã‚,å…¨ãƒã‚¹-åœ°é›·ãƒã‚¹é–‹æ”¾
```

### ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼
```
1. ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢
   â†“
2. ãƒ—ãƒ­ãƒ­ãƒ¼ã‚°ï¼ˆä¼šè©±ã‚·ãƒ¼ãƒ³ï¼‰
   - å¤•æ–¹ã®å¾…ã¡åˆã‚ã›
   - ã‚¢ãƒŸãŒä¸æ©Ÿå«Œã«ãªã‚‹
   â†“
3. EASY - å¾…ã¡åˆã‚ã›ç·¨
   - ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ï¼ˆ9Ã—9ã€åœ°é›·8å€‹ï¼‰
   - ã‚¯ãƒªã‚¢ â†’ é£Ÿäº‹ã‚·ãƒ¼ãƒ³ã¸
   - å¤±æ•— â†’ BAD ENDï¼ˆç½µå€’â†’ç›£ç¦ï¼‰
   â†“
4. é£Ÿäº‹ã‚·ãƒ¼ãƒ³ï¼ˆä¼šè©±ï¼‰
   - æ¥½ã—ãé£Ÿäº‹
   - ã‚¢ãƒŸãŒæ€¥ã«ä¸æ©Ÿå«Œã«
   â†“
5. NORMAL - é£Ÿäº‹ç·¨
   - ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ï¼ˆ12Ã—12ã€åœ°é›·18å€‹ï¼‰
   - ã‚¯ãƒªã‚¢ â†’ è‡ªå®…ã‚·ãƒ¼ãƒ³ã¸
   - å¤±æ•— â†’ BAD END
   â†“
6. è‡ªå®…ã‚·ãƒ¼ãƒ³ï¼ˆä¼šè©±ï¼‰
   - ã‚¢ãƒŸã®éƒ¨å±‹ã§ä¼šè©±
   - ã‚¢ãƒŸãŒãƒ¤ãƒ³ãƒ‡ãƒ¬åŒ–
   â†“
7. HARD - è‡ªå®…ç·¨
   - ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ï¼ˆ16Ã—16ã€åœ°é›·35å€‹ï¼‰
   - ã‚¯ãƒªã‚¢ â†’ TRUE ENDï¼ˆä»²è‰¯ãæœã‚’è¿ãˆã‚‹ï¼‰
   - å¤±æ•— â†’ BAD ENDï¼ˆç›£ç¦ï¼‰
```

### ä¼šè©±ã‚·ãƒ¼ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
```javascript
const NOVEL_SYSTEM = {
    // ãƒ†ã‚­ã‚¹ãƒˆè¡¨ç¤º
    textSpeed: 50,           // æ–‡å­—è¡¨ç¤ºé€Ÿåº¦ï¼ˆmsï¼‰
    autoMode: false,         // ã‚ªãƒ¼ãƒˆãƒ¢ãƒ¼ãƒ‰
    skipMode: false,         // ã‚¹ã‚­ãƒƒãƒ—ãƒ¢ãƒ¼ãƒ‰
    
    // é¸æŠè‚¢
    choices: [
        {
            scene: "meeting",
            options: [
                { text: "ã”ã‚ã‚“ã€ä»•äº‹ãŒé•·å¼•ã„ã¦...", result: "angry" },
                { text: "å¾…ãŸã›ã¦ã”ã‚ã‚“ï¼ã™ãè¡Œã“ã†ï¼", result: "normal" },
                { text: "ã‹ã‚ã„ã„ã‹ã‚‰è¨±ã—ã¦â™ª", result: "irritated" }
            ]
        }
    ],
    
    // å¥½æ„Ÿåº¦ï¼ˆéš ã—ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ï¼‰
    affection: {
        initial: 50,
        max: 100,
        min: 0,
        gameOverThreshold: 20
    }
};
```

### ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼éƒ¨åˆ†
```javascript
const MINESWEEPER_CONFIG = {
    // åœ°é›·ã‚’è¸ã‚“ã æ™‚ã®ãƒšãƒŠãƒ«ãƒ†ã‚£
    penalty: {
        easy: "å¥½æ„Ÿåº¦-10ã€è­¦å‘Šãƒ¡ãƒƒã‚»ãƒ¼ã‚¸",
        normal: "å¥½æ„Ÿåº¦-20ã€ã‚¢ãƒŸã®è¡¨æƒ…ãŒæ€–ããªã‚‹",
        hard: "å³BAD END"
    },
    
    // ç‰¹æ®Šãƒã‚¹
    specialTiles: {
        heart: {
            probability: 0.05,
            effect: "å¥½æ„Ÿåº¦+5",
            sprite: "heart_tile.png"
        },
        flower: {
            probability: 0.03,
            effect: "åœ°é›·1å€‹ãƒ’ãƒ³ãƒˆ",
            sprite: "flower_tile.png"
        }
    },
    
    // ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«
    theme: {
        easy: "pink",      // å¯æ„›ã„ãƒ”ãƒ³ã‚¯ç³»
        normal: "purple",  // ä¸ç©ãªç´«ç³»
        hard: "red"        // å±é™ºãªèµ¤ç³»
    }
};
```

## 4. ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®š

### ã‚¢ãƒŸï¼ˆå”¯ä¸€ã®ãƒ’ãƒ­ã‚¤ãƒ³ï¼‰
```javascript
const AMI = {
    name: "ã‚¢ãƒŸ",
    age: 20,
    personality: ["å¯æ„›ã„", "åœ°é›·ç³»", "ãƒ¤ãƒ³ãƒ‡ãƒ¬", "ç‹¬å æ¬²å¼·ã„"],
    
    // æ„Ÿæƒ…çŠ¶æ…‹
    emotions: {
        happy: { sprite: "ami_smile.png", bgm: "bgm_happy.mp3" },
        normal: { sprite: "ami_normal.png", bgm: "bgm_date.mp3" },
        irritated: { sprite: "ami_irritated.png", bgm: "bgm_tense.mp3" },
        angry: { sprite: "ami_angry.png", bgm: "bgm_danger.mp3" },
        dark: { sprite: "ami_dark.png", bgm: "bgm_horror.mp3" },
        yandere: { sprite: "ami_yandere.png", bgm: "bgm_yandere.mp3" },
        crazy: { sprite: "ami_crazy.png", bgm: "bgm_badend.mp3" }
    },
    
    // åœ°é›·ãƒ¯ãƒ¼ãƒ‰ï¼ˆãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ã®åœ°é›·é…ç½®ã«å½±éŸ¿ï¼‰
    triggerWords: [
        "ä»–ã®å¥³",
        "ä»•äº‹",
        "å‹é”",
        "ä¸€äººã®æ™‚é–“",
        "æ˜æ—¥æ—©ã„"
    ]
};
```

## 5. UI/UX

### ä¼šè©±ã‚·ãƒ¼ãƒ³ç”»é¢
```
[èƒŒæ™¯ç”»åƒï¼šã‚·ãƒ¼ãƒ³ã«å¿œã˜ãŸèƒŒæ™¯]

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         [ã‚¢ãƒŸã®ç«‹ã¡çµµ]              â”‚
â”‚                                     â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ã‚¢ãƒŸ                                â”‚
â”‚ã€Œé…ã„ï¼ã‚‚ã†ã€å¾…ã¡ããŸã³ã‚Œã¡ã‚ƒã£ãŸâ™ªã€â”‚
â”‚                                     â”‚
â”‚ â–¼                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[SKIP] [AUTO] [LOG] [MENU]
```

### ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ç”»é¢
```
[ä¸Šéƒ¨]
åœ°é›·ã‚’é¿ã‘ã‚ï¼ TIME: 02:45 | æ®‹ã‚Šåœ°é›·: 10

[ä¸­å¤® - ã‚²ãƒ¼ãƒ ãƒœãƒ¼ãƒ‰]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼       â”‚
â”‚  (æ„Ÿæƒ…ã«å¿œã˜ãŸè‰²èª¿)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[å³å´ - ã‚¢ãƒŸã®çŠ¶æ…‹]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              â”‚
â”‚   ã‚¢ãƒŸã®é¡”   â”‚
â”‚   (ãƒªã‚¢ãƒ«    â”‚
â”‚    ã‚¿ã‚¤ãƒ     â”‚
â”‚    åå¿œ)     â”‚
â”‚              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å¥½æ„Ÿåº¦ã‚²ãƒ¼ã‚¸ â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ä¸‹éƒ¨]
ğŸ’­ã€Œç§ã®åœ°é›·ã€è¸ã¾ãªã„ã§ã­...ã€
```

### ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢

#### TRUE END
```
[æ˜ã‚‹ã„æœã®å¯å®¤]

ã‚¢ãƒŸã€ŒãŠã¯ã‚ˆã†â™ª æ˜¨æ—¥ã¯æ¥½ã—ã‹ã£ãŸã­ã€
ã‚¢ãƒŸã€Œã“ã‚Œã‹ã‚‰ã‚‚ãšã£ã¨ä¸€ç·’ã ã‚ˆ...ã­ï¼Ÿã€

[HAPPY END]
```

#### BAD END
```
[çœŸã£æš—ãªéƒ¨å±‹]

ã‚¢ãƒŸã€Œã‚‚ã†é€ƒãŒã•ãªã„ã€
ã‚¢ãƒŸã€Œãšã£ã¨ã€ãšãƒ¼ã£ã¨ã€ã“ã“ã«ã„ã¦ã€
ã‚¢ãƒŸã€Œç§ã ã‘ã®ã‚‚ã®ã«ãªã£ã¦...ã€

[BAD END - ç›£ç¦]
```

## 6. æ¼”å‡ºä»•æ§˜

### æ„Ÿæƒ…å¤‰åŒ–æ¼”å‡º
```javascript
const EMOTION_EFFECTS = {
    // é€šå¸¸â†’ä¸æ©Ÿå«Œ
    toIrritated: {
        bgm: "ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¢ã‚¦ãƒˆâ†’ä¸ç©ãªBGM",
        visual: "ç”»é¢ãŒå°‘ã—æš—ããªã‚‹",
        sprite: "ç¬‘é¡”â†’çœŸé¡”â†’ä¸æ©Ÿå«Œ"
    },
    
    // ä¸æ©Ÿå«Œâ†’æ¿€æ€’
    toAngry: {
        bgm: "æ€¥æ¿€ã«éŸ³é‡ä¸Šæ˜‡ã€ä¸å”å’ŒéŸ³",
        visual: "ç”»é¢ãŒèµ¤ãæŸ“ã¾ã‚‹",
        sprite: "ç›®ãŒè¦‹é–‹ã‹ã‚Œã‚‹",
        effect: "ç”»é¢æŒ¯å‹•"
    },
    
    // æ¿€æ€’â†’ç‹‚æ°—
    toCrazy: {
        bgm: "ãƒ›ãƒ©ãƒ¼èª¿ã®BGM",
        visual: "ç”»é¢ã«ãƒã‚¤ã‚ºã€æ­ªã¿",
        sprite: "ç‹‚æ°—ã®ç¬‘é¡”",
        effect: "ç”»é¢ãŒå¾ã€…ã«æš—è»¢"
    }
};
```

### åœ°é›·ã‚’è¸ã‚“ã æ™‚ã®æ¼”å‡º
```javascript
const MINE_HIT_EFFECTS = {
    easy: {
        screen: "èµ¤ã„ãƒ•ãƒ©ãƒƒã‚·ãƒ¥",
        sound: "ã‚¬ãƒ©ã‚¹ãŒå‰²ã‚Œã‚‹éŸ³",
        ami: "æ€’ã‚Šé¡”ã«å¤‰åŒ–",
        dialogue: "...ä»Šã€ãªã‚“ã¦è¨€ã£ãŸï¼Ÿ"
    },
    
    normal: {
        screen: "ç”»é¢ãŒå‰²ã‚Œã‚‹ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ",
        sound: "å¿ƒè‡“ã®é¼“å‹•ï¼‹ä¸å”å’ŒéŸ³",
        ami: "é—‡è½ã¡é¡”",
        dialogue: "è¨±ã•ãªã„...çµ¶å¯¾ã«è¨±ã•ãªã„..."
    },
    
    hard: {
        screen: "ç”»é¢ãŒçœŸã£æš—ã«",
        sound: "çµ¶å«ï¼‹ãƒ›ãƒ©ãƒ¼SE",
        ami: "ç‹‚æ°—ã®è¡¨æƒ…",
        dialogue: "ã‚ã¯ã¯ã¯ã¯ã¯ï¼ã‚‚ã†çµ‚ã‚ã‚Šã ã‚ˆï¼",
        result: "å³BAD END"
    }
};
```

## 7. ã‚»ãƒ¼ãƒ–ã‚·ã‚¹ãƒ†ãƒ 

### ã‚¹ãƒ†ãƒ¼ã‚¸ã‚»ãƒ¼ãƒ–æ©Ÿèƒ½
å„ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢æ™‚ã«è‡ªå‹•ã‚»ãƒ¼ãƒ–ã€‚ã‚¿ã‚¤ãƒˆãƒ«ç”»é¢ã‹ã‚‰ç¶šãã‚’é¸æŠå¯èƒ½ã€‚

### æš—å·åŒ–ã‚»ãƒ¼ãƒ–ãƒ‡ãƒ¼ã‚¿
```javascript
const SAVE_DATA = {
    progress: {
        current_scene: "dinner_scene",
        cleared_stages: ["easy", "normal"],  // ã‚¯ãƒªã‚¢æ¸ˆã¿ã‚¹ãƒ†ãƒ¼ã‚¸
        unlocked_endings: [],
        total_playtime: 1800,
        checkpoint: "normal_clear"  // å†é–‹ãƒã‚¤ãƒ³ãƒˆ
    },

    statistics: {
        mines_hit: 15,
        perfect_clears: 2,
        bad_ends_seen: 3,
        true_end_achieved: false
    },

    gallery: {
        cg_unlocked: ["ami_smile", "ami_angry"],
        bgm_unlocked: ["bgm_date", "bgm_horror"],
        endings_unlocked: ["bad_end_1"],
        full_clear_bonus: false  // å…¨ã‚¯ãƒªã‚¢ç‰¹å…¸è§£æ”¾ãƒ•ãƒ©ã‚°
    },

    settings: {
        text_speed: 50,
        bgm_volume: 0.7,
        se_volume: 0.8,
        voice_volume: 0.9
    }
};
```

### å…¨ã‚¯ãƒªã‚¢ç‰¹å…¸
TRUE ENDåˆ°é”å¾Œã«è§£æ”¾ã•ã‚Œã‚‹è¦ç´ ï¼š

```javascript
const FULL_CLEAR_CONTENT = {
    reward_gallery: {
        stage1_clear: "reward_video_1.mp4",  // EASY ã‚¯ãƒªã‚¢ã®ã”è¤’ç¾å‹•ç”»
        stage2_clear: "reward_video_2.mp4",  // NORMAL ã‚¯ãƒªã‚¢ã®ã”è¤’ç¾å‹•ç”»
        stage3_clear: "reward_video_3.mp4",  // HARD ã‚¯ãƒªã‚¢ã®ã”è¤’ç¾å‹•ç”»
        true_end_special: "reward_video_special.mp4",  // TRUE ENDç‰¹åˆ¥å‹•ç”»
        all_videos_unlocked: true  // å…¨å‹•ç”»è§£æ”¾ãƒ»ã„ã¤ã§ã‚‚é–²è¦§å¯èƒ½
    },

    gallery_mode: {
        all_cg: true,           // å…¨CGé–²è¦§å¯èƒ½
        all_scenes: true,       // å…¨ã‚·ãƒ¼ãƒ³å›æƒ³
        all_rewards: true,      // å…¨ã”è¤’ç¾å‹•ç”»å†ç”Ÿ
        all_voices: true        // ãƒœã‚¤ã‚¹å†ç”Ÿ
    },

    extra_content: {
        free_play: true,        // å¥½ããªã‚¹ãƒ†ãƒ¼ã‚¸ã‚’è‡ªç”±ã«ãƒ—ãƒ¬ã‚¤
        bonus_scenarios: true,   // è¿½åŠ ã‚·ãƒŠãƒªã‚ª
        hidden_videos: true      // éš ã—ã”è¤’ç¾å‹•ç”»
    }
};

// ã‚®ãƒ£ãƒ©ãƒªãƒ¼ç”»é¢ã§ã®å‹•ç”»ç®¡ç†
const VIDEO_GALLERY = {
    videos: [
        { id: "reward_1", title: "å¾…ã¡åˆã‚ã›ç·¨ã‚¯ãƒªã‚¢", unlocked: false, path: "assets/videos/reward_1.mp4" },
        { id: "reward_2", title: "é£Ÿäº‹ç·¨ã‚¯ãƒªã‚¢", unlocked: false, path: "assets/videos/reward_2.mp4" },
        { id: "reward_3", title: "è‡ªå®…ç·¨ã‚¯ãƒªã‚¢", unlocked: false, path: "assets/videos/reward_3.mp4" },
        { id: "special", title: "TRUE ENDé”æˆ", unlocked: false, path: "assets/videos/special.mp4" },
        { id: "hidden_1", title: "???", unlocked: false, path: "assets/videos/hidden_1.mp4" }
    ]
};
```

## 8. å‹•ä½œç¢ºèªç”¨ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰

```html
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>åœ°é›·å¨˜ã«èŠ±æŸã‚’</title>
    <style>
        body {
            margin: 0;
            background: #000;
            color: #fff;
            font-family: 'Yu Gothic', sans-serif;
            overflow: hidden;
            user-select: none;
        }
        
        /* ä¼šè©±ã‚·ãƒ¼ãƒ³ */
        #novelScene {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="1280" height="720"><rect fill="%23654321" width="1280" height="720"/></svg>');
            background-size: cover;
        }
        
        #novelScene.active {
            display: block;
        }
        
        .character-sprite {
            position: absolute;
            bottom: 100px;
            left: 50%;
            transform: translateX(-50%);
            width: 400px;
            height: 600px;
            background: rgba(255,182,193,0.3);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 200px;
            transition: all 0.3s;
        }
        
        .character-sprite.angry {
            filter: hue-rotate(-20deg) brightness(0.8);
            background: rgba(255,0,0,0.3);
        }
        
        .dialogue-box {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 800px;
            background: rgba(0,0,0,0.9);
            border: 2px solid #ff69b4;
            border-radius: 10px;
            padding: 20px;
        }
        
        .character-name {
            color: #ff69b4;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .dialogue-text {
            font-size: 18px;
            line-height: 1.8;
            min-height: 60px;
        }
        
        .continue-indicator {
            position: absolute;
            bottom: 10px;
            right: 20px;
            animation: blink 1s infinite;
        }
        
        @keyframes blink {
            50% { opacity: 0; }
        }
        
        /* ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ã‚·ãƒ¼ãƒ³ */
        #gameScene {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
            background: linear-gradient(180deg, #2a2a2a 0%, #1a1a1a 100%);
        }
        
        #gameScene.active {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 50px;
        }
        
        .game-header {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
        }
        
        .game-title {
            font-size: 24px;
            color: #ff69b4;
            margin-bottom: 10px;
        }
        
        .game-info {
            display: flex;
            gap: 30px;
            justify-content: center;
            font-size: 18px;
        }
        
        #gameBoard {
            display: grid;
            gap: 2px;
            background: #000;
            padding: 10px;
            border: 3px solid #ff69b4;
            border-radius: 10px;
        }
        
        #gameBoard.easy {
            grid-template-columns: repeat(9, 35px);
        }
        
        #gameBoard.normal {
            grid-template-columns: repeat(12, 35px);
            border-color: #9b59b6;
        }
        
        #gameBoard.hard {
            grid-template-columns: repeat(16, 35px);
            border-color: #e74c3c;
        }
        
        .cell {
            width: 35px;
            height: 35px;
            background: #444;
            border: 1px solid #666;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s;
        }
        
        .cell:hover:not(.revealed) {
            background: #555;
            transform: scale(1.1);
        }
        
        .cell.revealed {
            background: #222;
            cursor: default;
        }
        
        .cell.mine {
            background: #e74c3c;
            animation: explode 0.5s;
        }
        
        @keyframes explode {
            0% { transform: scale(1); }
            50% { transform: scale(1.3); background: #ff0000; }
            100% { transform: scale(1); }
        }
        
        .cell.flagged {
            background: #f39c12;
        }
        
        .ami-status {
            width: 250px;
            text-align: center;
        }
        
        .ami-face {
            width: 200px;
            height: 200px;
            background: rgba(255,182,193,0.2);
            border-radius: 50%;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 100px;
            border: 3px solid #ff69b4;
            transition: all 0.3s;
        }
        
        .ami-face.angry {
            background: rgba(255,0,0,0.3);
            border-color: #e74c3c;
        }
        
        .affection-bar {
            width: 100%;
            height: 30px;
            background: #333;
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        
        .affection-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff69b4, #ff1493);
            width: 70%;
            transition: width 0.5s;
        }
        
        .ami-thought {
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
            color: #ff69b4;
        }
        
        /* ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ */
        #endingScene {
            position: absolute;
            width: 100%;
            height: 100%;
            display: none;
            background: #000;
            color: #fff;
            text-align: center;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        
        #endingScene.active {
            display: flex;
        }
        
        .ending-title {
            font-size: 48px;
            margin-bottom: 30px;
        }
        
        .ending-title.true {
            color: #ff69b4;
        }
        
        .ending-title.bad {
            color: #e74c3c;
        }
        
        .controls-info {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 12px;
            color: #666;
        }
    </style>
</head>
<body>
    <!-- ä¼šè©±ã‚·ãƒ¼ãƒ³ -->
    <div id="novelScene" class="active">
        <div class="character-sprite" id="amiSprite">
            ğŸ’•
        </div>
        <div class="dialogue-box">
            <div class="character-name">ã‚¢ãƒŸ</div>
            <div class="dialogue-text" id="dialogueText">
                é…ã„ï¼ã‚‚ã†ã€å¾…ã¡ããŸã³ã‚Œã¡ã‚ƒã£ãŸâ™ª
            </div>
            <div class="continue-indicator">â–¼</div>
        </div>
    </div>
    
    <!-- ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼ã‚·ãƒ¼ãƒ³ -->
    <div id="gameScene">
        <div class="game-header">
            <div class="game-title">åœ°é›·ã‚’é¿ã‘ã‚ï¼</div>
            <div class="game-info">
                <span>TIME: <span id="timer">00:00</span></span>
                <span>æ®‹ã‚Šåœ°é›·: <span id="mineCount">10</span></span>
            </div>
        </div>
        
        <div id="gameBoard" class="easy"></div>
        
        <div class="ami-status">
            <div class="ami-face" id="amiFace">
                ğŸ˜Š
            </div>
            <div class="affection-bar">
                <div class="affection-fill" id="affectionBar"></div>
            </div>
            <div class="ami-thought" id="amiThought">
                ç§ã®åœ°é›·ã€è¸ã¾ãªã„ã§ã­...
            </div>
        </div>
    </div>
    
    <!-- ã‚¨ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ç”»é¢ -->
    <div id="endingScene">
        <div class="ending-title" id="endingTitle">TRUE END</div>
        <div id="endingText"></div>
    </div>
    
    <div class="controls-info">
        å·¦ã‚¯ãƒªãƒƒã‚¯: é¸æŠ | å³ã‚¯ãƒªãƒƒã‚¯: ãƒ•ãƒ©ãƒƒã‚° | ã‚¹ãƒšãƒ¼ã‚¹: æ¬¡ã¸
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ çŠ¶æ…‹ç®¡ç†
        const gameState = {
            currentScene: 'novel',
            currentStage: 'meeting',
            difficulty: 'easy',
            affection: 70,
            dialogueIndex: 0
        };
        
        // ã‚·ãƒŠãƒªã‚ªãƒ‡ãƒ¼ã‚¿ï¼ˆCSVç®¡ç†ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆï¼‰
        const SCENARIO_DATA = {
            meeting: [
                { character: 'ã‚¢ãƒŸ', text: 'é…ã„ï¼ã‚‚ã†ã€å¾…ã¡ããŸã³ã‚Œã¡ã‚ƒã£ãŸâ™ª', emotion: 'smile' },
                { character: 'ã‚¢ãƒŸ', text: '...ãªã‚“ã§5åˆ†ã‚‚é…ã‚Œã‚‹ã®ï¼Ÿ', emotion: 'irritated' },
                { character: 'ã‚¢ãƒŸ', text: 'ç§ã®ã“ã¨ã€ã©ã†ã§ã‚‚ã„ã„ã®ï¼Ÿ', emotion: 'angry' },
                { character: 'system', text: '[ã‚¢ãƒŸãŒä¸æ©Ÿå«Œã«ãªã£ãŸï¼åœ°é›·ã‚’é¿ã‘ã¦æ©Ÿå«Œã‚’ç›´ãã†ï¼]', action: 'start_game' }
            ],
            easy_clear: [
                { character: 'ã‚¢ãƒŸ', text: 'ã‚ˆã‹ã£ãŸâ™ªã¡ã‚ƒã‚“ã¨ç§ã®ã“ã¨è¦‹ã¦ãã‚Œã¦ã‚‹ã‚“ã ã­ï¼', emotion: 'happy' },
                { character: 'ã‚¢ãƒŸ', text: 'ãŠè…¹ã™ã„ã¡ã‚ƒã£ãŸã€‚ã”é£¯é£Ÿã¹ã«è¡Œã“ï¼Ÿ', emotion: 'smile' },
                { character: 'system', text: '[é£Ÿäº‹ç·¨ã¸é€²ã‚€]', action: 'next_stage' }
            ]
        };
        
        // ä¼šè©±ã‚·ãƒ¼ãƒ³åˆ¶å¾¡
        function showDialogue() {
            const scene = gameState.currentStage;
            const dialogues = SCENARIO_DATA[scene];
            
            if (gameState.dialogueIndex < dialogues.length) {
                const dialogue = dialogues[gameState.dialogueIndex];
                
                if (dialogue.character === 'ã‚¢ãƒŸ') {
                    document.getElementById('dialogueText').textContent = dialogue.text;
                    updateAmiEmotion(dialogue.emotion);
                } else if (dialogue.character === 'system') {
                    document.getElementById('dialogueText').textContent = dialogue.text;
                    
                    if (dialogue.action === 'start_game') {
                        setTimeout(() => {
                            startMinesweeper();
                        }, 2000);
                    }
                }
                
                gameState.dialogueIndex++;
            }
        }
        
        // ã‚¢ãƒŸã®æ„Ÿæƒ…æ›´æ–°
        function updateAmiEmotion(emotion) {
            const sprite = document.getElementById('amiSprite');
            const face = document.getElementById('amiFace');
            
            const emotions = {
                smile: { emoji: 'ğŸ’•', class: '' },
                irritated: { emoji: 'ğŸ˜’', class: '' },
                angry: { emoji: 'ğŸ˜ ', class: 'angry' },
                happy: { emoji: 'ğŸ˜Š', class: '' },
                dark: { emoji: 'ğŸ‘¿', class: 'angry' }
            };
            
            const emo = emotions[emotion] || emotions.smile;
            
            if (sprite) {
                sprite.textContent = emo.emoji;
                sprite.className = 'character-sprite ' + emo.class;
            }
            
            if (face) {
                face.textContent = emo.emoji;
                face.className = 'ami-face ' + emo.class;
            }
        }
        
        // ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼é–‹å§‹
        function startMinesweeper() {
            document.getElementById('novelScene').classList.remove('active');
            document.getElementById('gameScene').classList.add('active');
            
            initBoard();
        }
        
        // ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼åˆæœŸåŒ–
        let board = [];
        let revealed = [];
        let flagged = [];
        let mines = [];
        let gameTimer = 0;
        let timerInterval;
        
        function initBoard() {
            const sizes = {
                easy: { size: 9, mines: 8 },
                normal: { size: 12, mines: 18 },
                hard: { size: 16, mines: 35 }
            };
            
            const config = sizes[gameState.difficulty];
            const boardEl = document.getElementById('gameBoard');
            boardEl.className = gameState.difficulty;
            boardEl.innerHTML = '';
            
            const totalCells = config.size * config.size;
            board = Array(totalCells).fill(0);
            revealed = Array(totalCells).fill(false);
            flagged = Array(totalCells).fill(false);
            mines = [];
            
            // åœ°é›·é…ç½®
            while (mines.length < config.mines) {
                const pos = Math.floor(Math.random() * totalCells);
                if (!mines.includes(pos)) {
                    mines.push(pos);
                    board[pos] = -1;
                    
                    // å‘¨å›²ã®æ•°å­—ã‚’å¢—ã‚„ã™
                    for (let dy = -1; dy <= 1; dy++) {
                        for (let dx = -1; dx <= 1; dx++) {
                            const nx = (pos % config.size) + dx;
                            const ny = Math.floor(pos / config.size) + dy;
                            if (nx >= 0 && nx < config.size && ny >= 0 && ny < config.size) {
                                const npos = ny * config.size + nx;
                                if (board[npos] !== -1) {
                                    board[npos]++;
                                }
                            }
                        }
                    }
                }
            }
            
            // ã‚»ãƒ«ç”Ÿæˆ
            for (let i = 0; i < totalCells; i++) {
                const cell = document.createElement('div');
                cell.className = 'cell';
                cell.dataset.index = i;
                
                cell.addEventListener('click', () => revealCell(i, config.size));
                cell.addEventListener('contextmenu', (e) => {
                    e.preventDefault();
                    toggleFlag(i);
                });
                
                boardEl.appendChild(cell);
            }
            
            document.getElementById('mineCount').textContent = config.mines;
            startTimer();
        }
        
        // ã‚»ãƒ«ã‚’é–‹ã
        function revealCell(index, gridSize) {
            if (revealed[index] || flagged[index]) return;
            
            revealed[index] = true;
            const cell = document.querySelector(`[data-index="${index}"]`);
            cell.classList.add('revealed');
            
            if (board[index] === -1) {
                // åœ°é›·
                cell.classList.add('mine');
                cell.textContent = 'ğŸ’£';
                hitMine();
            } else {
                if (board[index] > 0) {
                    cell.textContent = board[index];
                    cell.style.color = ['', '#0099ff', '#00ff00', '#ff9900', '#ff00ff', '#ff0099', '#00ffff', '#ffffff', '#808080'][board[index]];
                } else {
                    // ç©ºç™½ãƒã‚¹ã¯å‘¨å›²ã‚‚é–‹ã
                    for (let dy = -1; dy <= 1; dy++) {
                        for (let dx = -1; dx <= 1; dx++) {
                            const nx = (index % gridSize) + dx;
                            const ny = Math.floor(index / gridSize) + dy;
                            if (nx >= 0 && nx < gridSize && ny >= 0 && ny < gridSize) {
                                revealCell(ny * gridSize + nx, gridSize);
                            }
                        }
                    }
                }
                
                checkWin();
            }
        }
        
        // ãƒ•ãƒ©ãƒƒã‚°åˆ‡ã‚Šæ›¿ãˆ
        function toggleFlag(index) {
            if (revealed[index]) return;
            
            flagged[index] = !flagged[index];
            const cell = document.querySelector(`[data-index="${index}"]`);
            
            if (flagged[index]) {
                cell.classList.add('flagged');
                cell.textContent = 'ğŸš©';
            } else {
                cell.classList.remove('flagged');
                cell.textContent = '';
            }
            
            const flagCount = flagged.filter(f => f).length;
            const mineCount = mines.length - flagCount;
            document.getElementById('mineCount').textContent = Math.max(0, mineCount);
        }
        
        // åœ°é›·ã‚’è¸ã‚“ã 
        function hitMine() {
            gameState.affection -= 20;
            updateAffectionBar();
            
            document.getElementById('amiFace').textContent = 'ğŸ˜¡';
            document.getElementById('amiThought').textContent = 'æœ€ä½...ãªã‚“ã§ç§ã®æ°—æŒã¡ã‚ã‹ã£ã¦ãã‚Œãªã„ã®ï¼Ÿ';
            
            if (gameState.affection <= 20 || gameState.difficulty === 'hard') {
                setTimeout(() => {
                    showBadEnd();
                }, 1500);
            } else {
                setTimeout(() => {
                    alert('ã‚¢ãƒŸã®å¥½æ„Ÿåº¦ãŒä¸‹ãŒã£ãŸï¼\nã‚‚ã†ä¸€åº¦æŒ‘æˆ¦...');
                    initBoard();
                }, 1500);
            }
        }
        
        // ã‚¯ãƒªã‚¢åˆ¤å®š
        function checkWin() {
            let allRevealed = true;
            for (let i = 0; i < board.length; i++) {
                if (board[i] !== -1 && !revealed[i]) {
                    allRevealed = false;
                    break;
                }
            }
            
            if (allRevealed) {
                clearInterval(timerInterval);
                document.getElementById('amiFace').textContent = 'ğŸ˜';
                document.getElementById('amiThought').textContent = 'å¬‰ã—ã„ï¼ã¡ã‚ƒã‚“ã¨ç§ã®ã“ã¨ç†è§£ã—ã¦ãã‚Œã¦ã‚‹â™ª';
                
                setTimeout(() => {
                    if (gameState.difficulty === 'hard') {
                        showTrueEnd();
                    } else {
                        alert('ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¯ãƒªã‚¢ï¼æ¬¡ã¸é€²ã¿ã¾ã™');
                        // æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã¸
                        nextStage();
                    }
                }, 1500);
            }
        }
        
        // æ¬¡ã®ã‚¹ãƒ†ãƒ¼ã‚¸
        function nextStage() {
            const stages = ['easy', 'normal', 'hard'];
            const currentIndex = stages.indexOf(gameState.difficulty);
            
            if (currentIndex < stages.length - 1) {
                gameState.difficulty = stages[currentIndex + 1];
                gameState.dialogueIndex = 0;
                gameState.currentStage = gameState.difficulty + '_clear';
                
                document.getElementById('gameScene').classList.remove('active');
                document.getElementById('novelScene').classList.add('active');
                
                // æ¬¡ã®ã‚·ãƒ¼ãƒ³ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
                showDialogue();
            }
        }
        
        // å¥½æ„Ÿåº¦ãƒãƒ¼æ›´æ–°
        function updateAffectionBar() {
            const bar = document.getElementById('affectionBar');
            if (bar) {
                bar.style.width = gameState.affection + '%';
            }
        }
        
        // ã‚¿ã‚¤ãƒãƒ¼
        function startTimer() {
            gameTimer = 0;
            clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                gameTimer++;
                const minutes = Math.floor(gameTimer / 60);
                const seconds = gameTimer % 60;
                document.getElementById('timer').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }
        
        // TRUE END
        function showTrueEnd() {
            document.getElementById('gameScene').classList.remove('active');
            document.getElementById('endingScene').classList.add('active');
            document.getElementById('endingTitle').textContent = 'TRUE END';
            document.getElementById('endingTitle').className = 'ending-title true';
            document.getElementById('endingText').innerHTML = 
                'ã‚¢ãƒŸã€ŒãŠã¯ã‚ˆã†â™ª æ˜¨æ—¥ã¯æ¥½ã—ã‹ã£ãŸã­ã€<br>' +
                'ã‚¢ãƒŸã€Œã“ã‚Œã‹ã‚‰ã‚‚ãšã£ã¨ä¸€ç·’ã ã‚ˆ...ã­ï¼Ÿã€<br><br>' +
                'ç„¡äº‹ã«æœã‚’è¿ãˆã‚‹ã“ã¨ãŒã§ããŸã€‚';
        }
        
        // BAD END
        function showBadEnd() {
            document.getElementById('gameScene').classList.remove('active');
            document.getElementById('endingScene').classList.add('active');
            document.getElementById('endingTitle').textContent = 'BAD END';
            document.getElementById('endingTitle').className = 'ending-title bad';
            document.getElementById('endingText').innerHTML = 
                'ã‚¢ãƒŸã€Œã‚‚ã†é€ƒãŒã•ãªã„ã€<br>' +
                'ã‚¢ãƒŸã€Œãšã£ã¨ã€ãšãƒ¼ã£ã¨ã€ã“ã“ã«ã„ã¦ã€<br>' +
                'ã‚¢ãƒŸã€Œç§ã ã‘ã®ã‚‚ã®ã«ãªã£ã¦...ã€<br><br>' +
                'ã‚ãªãŸã¯äºŒåº¦ã¨å¤–ã«å‡ºã‚‹ã“ã¨ã¯ãªã‹ã£ãŸã€‚';
        }
        
        // ã‚­ãƒ¼æ“ä½œ
        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space' && gameState.currentScene === 'novel') {
                showDialogue();
            }
        });
        
        // åˆæœŸåŒ–
        updateAffectionBar();
        
        console.log('åœ°é›·å¨˜ã«èŠ±æŸã‚’ - ã‚µãƒ³ãƒ—ãƒ«ç‰ˆ');
        console.log('ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ä¼šè©±ã‚’é€²ã‚ã‚‹');
        console.log('å·¦ã‚¯ãƒªãƒƒã‚¯: ãƒã‚¹ã‚’é–‹ã | å³ã‚¯ãƒªãƒƒã‚¯: ãƒ•ãƒ©ãƒƒã‚°');
    </script>
</body>
</html>
```

---

## æ”¹è¨‚ã®ãƒã‚¤ãƒ³ãƒˆ

1. **ã‚²ãƒ¼ãƒ æ§‹æˆ**
   - ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã¯ã€Œã‚¢ãƒŸã€1äººã®ã¿
   - 3æ®µéšã®é›£æ˜“åº¦ï¼ˆEASY/NORMAL/HARDï¼‰
   - ä¼šè©±ã‚·ãƒ¼ãƒ³â†’ãƒã‚¤ãƒ³ã‚¹ã‚¤ãƒ¼ãƒ‘ãƒ¼â†’ä¼šè©±ã‚·ãƒ¼ãƒ³ã®æµã‚Œ

2. **ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é€²è¡Œ**
   - EASY: å¾…ã¡åˆã‚ã›ï¼ˆä¸æ©Ÿå«Œï¼‰â†’ã‚¯ãƒªã‚¢ã§é£Ÿäº‹ã¸
   - NORMAL: é£Ÿäº‹ä¸­ï¼ˆæ€¥ã«ä¸æ©Ÿå«Œï¼‰â†’ã‚¯ãƒªã‚¢ã§è‡ªå®…ã¸  
   - HARD: è‡ªå®…ï¼ˆãƒ¤ãƒ³ãƒ‡ãƒ¬åŒ–ï¼‰â†’ã‚¯ãƒªã‚¢ã§æœã‚’è¿ãˆã‚‹

3. **å¤±æ•—æ™‚ã®ãƒšãƒŠãƒ«ãƒ†ã‚£**
   - åœ°é›·ã‚’è¸ã‚€ã¨ç½µå€’ã•ã‚Œã‚‹
   - å¥½æ„Ÿåº¦ãŒä¸‹ãŒã‚Šã™ãã‚‹ã‹HARDã§å¤±æ•—â†’ç›£ç¦END

4. **ãƒ‡ãƒ¼ã‚¿ç®¡ç†**
   - ã‚»ãƒªãƒ•ã€ç”»åƒã€éŸ³å£°ã¯å…¨ã¦CSVç®¡ç†
   - é…å¸ƒæ™‚ã¯exeåŒ–ã—ã¦ãƒ‡ãƒ¼ã‚¿ä¿è­·

---

*ã“ã®è¦ä»¶å®šç¾©æ›¸ã«åŸºã¥ã„ã¦Claude Codeã§å®Ÿè£…ã‚’é€²ã‚ã¦ãã ã•ã„ã€‚*